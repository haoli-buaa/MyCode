package cn.edu.buaa.haoli.udp;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetSocketAddress;
import java.net.SocketException;
import java.util.Scanner;

public class Client {
	// UDP client
	// 向服务器发送数据
	public static void main(String[] args) throws IOException {
		// 创建客户端，端口设置为：9001
		DatagramSocket ds = new DatagramSocket(9001);
		// 准备数据：交互式
		Scanner sc = new Scanner(System.in);
		System.out.println("Enter \"\\:q\" to exit");
		while (sc.hasNext()) {
			String msg = sc.nextLine();
			if(msg.equals("\\:q"))
				break;
			byte[] data = msg.getBytes();
			// 打包数据
			DatagramPacket dp = new DatagramPacket(data, 0, data.length,
					new InetSocketAddress("localhost", 9000));
			// 发送数据
			ds.send(dp);
		}				
		//释放资源
		ds.close();
	}
}
